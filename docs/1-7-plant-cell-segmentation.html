<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="1.7 Plant Cell Segmentation | Getting Started with BisQue" />
<meta property="og:type" content="book" />

<meta property="og:image" content="images/cover.png" />
<meta property="og:description" content="BisQue (Bio-Image Semantic Query User Environment) : Store, visualize,organize and analyze images in the cloud." />




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" type="text/javascript"></script>

<meta name="description" content="BisQue (Bio-Image Semantic Query User Environment) : Store, visualize,organize and analyze images in the cloud.">

<title>1.7 Plant Cell Segmentation | Getting Started with BisQue</title>

<script src="libs/header-attrs-2.1/header-attrs.js"></script>
<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link rel="stylesheet" href="style.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#cloud-service-module-development-python-api">Cloud Service | Module Development | Python API</a>
<ul>
<li><a href="docker-installation.html#docker-installation">Docker Installation</a>
<ul>
<li><a href="docker-installation.html#intro-bisque-docker-container"><strong>Intro: BisQue Docker Container</strong></a></li>
</ul></li>
</ul></li>
<li><a href="1-intro.html#intro"><span class="toc-section-number">1</span> BisQue Cloud Service</a>
<ul>
<li><a href="1-1-how-to-login-or-create-a-new-user.html#how-to-login-or-create-a-new-user"><span class="toc-section-number">1.1</span> How to Login or Create a New User</a></li>
<li><a href="1-2-how-to-upload-data.html#how-to-upload-data"><span class="toc-section-number">1.2</span> How to Upload Data</a>
<ul>
<li><a href="1-2-how-to-upload-data.html#step-1.-login">Step 1. Login</a></li>
<li><a href="1-2-how-to-upload-data.html#step-2.-upload-file-or-folder">Step 2. Upload File or Folder</a></li>
<li><a href="1-2-how-to-upload-data.html#step-3.-build-a-dataset">Step 3. Build a Dataset</a></li>
<li><a href="1-2-how-to-upload-data.html#step-4.-setting-permissions">Step 4. Setting Permissions</a></li>
</ul></li>
<li><a href="1-3-how-to-add-annotations.html#how-to-add-annotations"><span class="toc-section-number">1.3</span> How to Add Annotations</a>
<ul>
<li><a href="1-3-how-to-add-annotations.html#overview">Overview</a></li>
</ul></li>
<li><a href="1-4-how-to-run-a-module.html#how-to-run-a-module"><span class="toc-section-number">1.4</span> How to Run a Module</a></li>
<li><a href="1-5-imagej-module.html#imagej-module"><span class="toc-section-number">1.5</span> ImageJ Module</a>
<ul>
<li><a href="1-5-imagej-module.html#overview-1">Overview</a></li>
<li><a href="1-5-imagej-module.html#uploading-of-imagej-pipelines">Uploading of ImageJ Pipelines</a></li>
<li><a href="1-5-imagej-module.html#running-an-imagej-macro">Running an ImageJ Macro</a></li>
<li><a href="1-5-imagej-module.html#special-bisque-extensions-for-imagej">Special BisQue extensions for ImageJ</a></li>
</ul></li>
<li><a href="1-6-cellprofiler-module.html#cellprofiler-module"><span class="toc-section-number">1.6</span> CellProfiler Module</a>
<ul>
<li><a href="1-6-cellprofiler-module.html#overview-2">Overview</a></li>
<li><a href="1-6-cellprofiler-module.html#uploading-of-cellprofiler-pipelines">Uploading of CellProfiler Pipelines</a></li>
<li><a href="1-6-cellprofiler-module.html#running-a-cellprofiler-pipeline">Running a CellProfiler Pipeline</a></li>
<li><a href="1-6-cellprofiler-module.html#results">Results</a></li>
</ul></li>
<li><a href="1-7-plant-cell-segmentation.html#plant-cell-segmentation"><span class="toc-section-number">1.7</span> Plant Cell Segmentation</a>
<ul>
<li><a href="1-7-plant-cell-segmentation.html#overview-3">Overview</a></li>
<li><a href="1-7-plant-cell-segmentation.html#input"><strong><code>Input</code></strong></a></li>
<li><a href="1-7-plant-cell-segmentation.html#hyperparameters">Hyperparameters</a></li>
<li><a href="1-7-plant-cell-segmentation.html#cell-features">Cell Features</a></li>
<li><a href="1-7-plant-cell-segmentation.html#output"><strong><code>Output</code></strong></a></li>
</ul></li>
</ul></li>
<li><a href="2-module-development.html#module-development"><span class="toc-section-number">2</span> Module Development</a>
<ul>
<li><a href="2-module-development.html#how-to-begin-building-modules"><strong>How to Begin Building Modules</strong></a></li>
<li><a href="2-1-dockerfile.html#dockerfile"><span class="toc-section-number">2.1</span> Dockerfile</a>
<ul>
<li><a href="2-1-dockerfile.html#example-composite-strength"><strong>Example: Composite Strength</strong></a></li>
</ul></li>
<li><a href="2-2-module-xml.html#module-xml"><span class="toc-section-number">2.2</span> Module XML</a>
<ul>
<li><a href="2-2-module-xml.html#example"><strong>Example</strong></a></li>
<li><a href="2-2-module-xml.html#module-description">Module Description</a></li>
<li><a href="2-2-module-xml.html#configurations-for-images-datasets-and-resources">Configurations for Images, Datasets, and Resources</a></li>
<li><a href="2-2-module-xml.html#data-parallel-execution">Data-Parallel Execution</a></li>
</ul></li>
<li><a href="2-3-python-script-wrapper.html#python-script-wrapper"><span class="toc-section-number">2.3</span> Python Script Wrapper</a>
<ul>
<li><a href="2-3-python-script-wrapper.html#example.-python-script-wrapper"><em>Example.</em> Python Script Wrapper</a></li>
</ul></li>
<li><a href="2-4-source-code.html#source-code"><span class="toc-section-number">2.4</span> Source Code</a>
<ul>
<li><a href="2-4-source-code.html#example.-composite-strength-module"><em>Example.</em> Composite Strength Module</a></li>
</ul></li>
<li><a href="2-5-runtime-module-configuration.html#runtime-module-configuration"><span class="toc-section-number">2.5</span> Runtime Module Configuration</a>
<ul>
<li><a href="2-5-runtime-module-configuration.html#example.-composite-strength-module-1"><em>Example.</em> Composite Strength Module</a></li>
</ul></li>
<li><a href="2-6-python-setup.html#python-setup"><span class="toc-section-number">2.6</span> Python Setup</a></li>
</ul></li>
<li><a href="3-bqapi.html#bqapi"><span class="toc-section-number">3</span> BQAPI</a>
<ul>
<li><a href="download-an-array.html#download-an-array"><strong>Download an Array</strong></a>
<ul>
<li><a href="download-an-array.html#access-an-hdf5-table-from-bisque">Access an HDF5 Table from BisQue</a></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="plant-cell-segmentation" class="section level2" number="1.7">
<h2><span class="header-section-number">1.7</span> Plant Cell Segmentation</h2>
<div id="overview-3" class="section level3 unnumbered" number="">
<h3>Overview</h3>
<p>This module is for segmenting 3D membrane tagged cell images. The workflow is as follows: 3D UNet to output the probability map of a cell boundary, 3D watershed to get the initial cell label, and 3D Conditional Random Field (CRF) to refine the segmentation label.</p>
<div id="cellect-2.0-module-homepage" class="section level4 unnumbered" number="">
<h4>CellECT 2.0 Module Homepage</h4>
<p>Using the <strong>Analyze</strong> tab on BisQue, you should see the Cell Segmentation 3D UNET module. Click on it and you should see a landing page like this.</p>
<div class="figure">
<img src="images/CellECT.png" alt="" />
<p class="caption"><strong>CellECT 2.0 Module Homepage.</strong> Here is the landing page for the GPU-enabled CellECT 2.0 module.</p>
</div>
</div>
<div id="algorithm-workflow-diagram" class="section level4 unnumbered" number="">
<h4>Algorithm Workflow Diagram</h4>
<p>By using 3D UNET on the backend, we are able to segment the 3D volumes of the cells. We then create the segmentation map and use a Conditional Random Field (CRF) to further refine the segmentation map. Lastly, we use the information from the algorithm to extract features about the cells such as volume, surface coordinates, and many others.</p>
<div class="figure">
<img src="images/tom_workflow.svg" alt="" />
<p class="caption"><strong>CellECT 2.0 Workflow.</strong> The Plant Cell Segmentation Workflow from the algorithmic view.</p>
</div>
</div>
<div id="module-integration-workflow" class="section level4 unnumbered" number="">
<h4>Module Integration Workflow</h4>
<div class="figure">
<img src="images/tom_moduleflow.svg" alt="" />
<p class="caption"><strong>Module Integration Workflow.</strong> Workflow for integrating the Plant Cell Segmentation module.</p>
</div>
<hr />
</div>
</div>
<div id="input" class="section level3 unnumbered" number="">
<h3><strong><code>Input</code></strong></h3>
<div class="figure">
<img src="images/tiff_images.svg" alt="" />
<p class="caption"><strong>Sample Plant Cell Images.</strong> These images are taken from time series data stored in <code>TIFF</code> files.</p>
</div>
<ul>
<li><code>TIFF Image</code> with minimum <span class="math inline">\(z &gt; 1\)</span></li>
</ul>
</div>
<div id="hyperparameters" class="section level3 unnumbered" number="">
<h3>Hyperparameters</h3>
<ul>
<li><p><code>Threshold</code> - The bilateral standard deviation (threshold) for CRF define how much intensity-homogeneity is required within a region. Higher values allow greater variations under the same label.</p></li>
<li><p><code>Label Threshold</code> - The minimum possible volume of cells to avoid segmenting intercellular space as an individual cell.</p></li>
<li><p><code>Minimum Distance</code> - In the seeds detection for watershed, the minimum possible distance between two seeds. The lower the value is, the more likely to have over-segmentation.</p></li>
<li><p><code>Minimum Cell Size</code> - Minimum</p></li>
</ul>
</div>
<div id="cell-features" class="section level3 unnumbered" number="">
<h3>Cell Features</h3>
<ul>
<li><code>Cell Number</code> - The number of cells in each image stack.</li>
<li><code>Cell Volume</code> - The size of each cell in terms of number of voxels.</li>
<li><code>Cell Center</code> - The centroid of each cell.</li>
<li><code>Cell Coordinates</code> - The surface coordinate of each cell.</li>
<li><code>Adjacency Table</code> - The graph represents the neighbor of each cell</li>
<li><code>3-way Conjunction Points</code> - The touch points of 3 neighboring cells</li>
</ul>
</div>
<div id="output" class="section level3 unnumbered" number="">
<h3><strong><code>Output</code></strong></h3>
<ul>
<li><code>Segmented TIFF Image</code></li>
<li><code>HDF5 Table with Cell Features</code></li>
</ul>
<table>
<caption><span id="tab:unnamed-chunk-1">TABLE 1.1: </span>Sample HDF5 Table with Cell Features</caption>
<thead>
<tr class="header">
<th align="right">CellNumber</th>
<th align="right">CellVolume</th>
<th align="left">CellCenter</th>
<th align="left">SegmentedImage</th>
<th align="left">SurfaceCoordinates</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">9832</td>
<td align="left">[5, 57, 5]</td>
<td align="left">SEGMENTED TIFF as ARRAY</td>
<td align="left">ARRAY of Surface Coordinates</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">2387</td>
<td align="left">[5, 87, 5]</td>
<td align="left">SEGMENTED TIFF as ARRAY</td>
<td align="left">ARRAY of Surface Coordinates</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">945</td>
<td align="left">[5, 23, 5]</td>
<td align="left">SEGMENTED TIFF as ARRAY</td>
<td align="left">ARRAY of Surface Coordinates</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">2843</td>
<td align="left">[5, 38, 5]</td>
<td align="left">SEGMENTED TIFF as ARRAY</td>
<td align="left">ARRAY of Surface Coordinates</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1029</td>
<td align="left">[5, 27, 5]</td>
<td align="left">SEGMENTED TIFF as ARRAY</td>
<td align="left">ARRAY of Surface Coordinates</td>
</tr>
</tbody>
</table>

</div>
</div>
<!-- </div> -->
<p style="text-align: center;">
<a href="1-6-cellprofiler-module.html"><button class="btn btn-default">Previous</button></a>
<a href="2-module-development.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
